<!DOCTYPE html>
<meta charset="utf-8">
	<style>
	#chart svg {
  		height: 600px;
	}
	</style>
	<link href="nv.d3.css" rel="stylesheet" type ="text/css">
<body>
	<div id="chart">
  	<svg></svg>
	</div>
	<script src="d3.js"></script>
	<script src="nv.d3.min.js"></script>
	<script>
	nv.addGraph(function () {
	    var chart = nv.models.scatterChart()
	        .showDistX(true)
	        .showDistY(true)
	        .color(d3.scale.category10().range());
		chart.options({

			transitionDuration: 500
		})

		chart.tooltip.contentGenerator(function (d) {
		  //console.log(d.series)
          var html = '<h3> Port </h3>';
          d.series.forEach(function(elem){
            html += "<h3>"+elem.value+" -> "+d.value+"</h3>";
          })
          return html;
        })

		var width = document.body.clientWidth
		var height = 600;
		var temp =[80,100,200,300,400]
		var swidth = d3.scale.ordinal().domain(temp).range([0,width]);
		var sheight = d3.scale.ordinal().domain([0,10000]).range([0, height]);

		chart.xAxis.axisLabel("Destination Port");
		chart.yAxis.axisLabel("Initial Port");

	    var data = [],
	        shapes = ['circle', 'diamond', 'triangle-up', 'triangle-down', 'cross', 'square'],
	        pro = ['TCP', 'UDP', 'ICMP'];

	    d3.csv('data/Scatter/c.csv', function (d) {
	        for (i = 0; i < 3; i++) {
	            data.push({
	                key: 'Protocol: ' + pro[i],
	                values: []
	            });
	            for (j = 0; j < d.length; j++) {
	                if (d[j].protocol == pro[i])(
	                    data[i].values.push({
	                        x: d[j].start,
	                        y: d[j].end,
	                        size: Math.log(d[j].sum)//Configure the size of each scatter point
	                         //Configure the shape of each scatter point.
	                    })
	                )
	            }
	        }
	        d3.select('#chart svg')
				.datum(data)
				.transition()
				.duration(500)
				.call(chart);
	        nv.utils.windowResize(chart.update);
	    })
	});

	</script>
</body>

<!-- https://stackoverflow.com/questions/17296938/nvd3-scatter-plot-with-ordinal-scale
https://stackoverflow.com/questions/14148310/line-chart-using-ordinal-x-axis-with-d3-js-and-nvd3-js
